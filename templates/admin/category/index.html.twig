{% extends 'admin/base.html.twig' %}
{% import "macros/breadcrumb.html.twig" as utils %}
{% import "macros/table.html.twig" as table %}
{% import "macros/alertes.html.twig" as alerte %}

{% block title %}Category index | {{app_name}} {% endblock %}

{% block stylesheets %}
  {% import "macros/head.html.twig" as head %}
  {{ head.dataTable() }}
{% endblock %}

{% block breadcrumb %}
    {{ utils.breadcrumb('Manage categories')}}
{% endblock %}

{% block body %}

{% for item in app.flashes('success') %}
  {{ alert.alert(item,'success')}}
{% endfor %}

<div class="row">
  <div class="col-md-6">
    <div class="card card-primary card-outline">
      <div class="card-header">
        <p>Create category</p>
      </div>
      <div class="card-body">
        {{ include('admin/category/_form.html.twig') }}
      </div>
    </div>
  </div>
    <div class="col-md-12 col-12">
        <div class="card card-primary card-outline card-tabs">
        <div class="card-header">
            <p>Manage categories</p>
        </div>
            <div class="card-body">
            <div class="col-md-12">
                {# {{ include ('admin/category/_dataTable.html.twig',{id:'1',items: categories}) }} #}
                <table id="datatable_1" class="table table-bordered table-striped">
                  <thead>
                  {{ table.head(['Nom']) }}
                  </thead>
                  <tbody>
                    {% for item in categories %}
                    <tr>
                      <td>{{ item.title}}</td>
                      <td>
                        <a href="{{ path('category_edit', {'id': item.id}) }}" class="btn"><i
                            class="fas fa-edit text-success"></i>
                        </a>
                        <form method="post" class="d-inline-block" action="{{ path('category_delete', {'id': item.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                          <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ item.id) }}">
                          <button class="btn"><i class="fas fa-trash-alt text-danger "></i></button>
                        </form>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                      <tfoot>
                      {{ table.head(['Nom']) }}
                      </tfoot>
              </table>
            </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block foot %}
  {% import "macros/foot.html.twig" as foot %}
  {{ foot.dataTable() }}
{% endblock %}

{% block javascripts %}
{{ table.jsDataTable('datatable_1')}}
  <script>
   $(document).ready(function(){
     //nivagation 
     $('#gestions').addClass(' menu-is-opening menu-open')
     $('.gestions').addClass('active')
     $('.gestion-category').addClass('active') 
   })
  </script>
{% endblock %}